# /learn - Session Feedback Learning Skill for OpenCode

A skill for [OpenCode](https://opencode.ai) that automatically extracts learnings from your coding sessions and persists them for future reference.

## What It Does

During coding sessions, you give feedback to your AI agent: corrections, preferences, process guidance. This skill captures that feedback, classifies it by importance, and stores it in a `LEARNINGS.md` file that the agent reads in future sessions.

**The agent learns from your corrections and doesn't repeat the same mistakes.**

## Features

- **Automatic feedback extraction** from session conversations
- **Smart classification** into HIGH/MEDIUM/LOW priority levels
- **Self-learning confirmation** - starts by asking, learns to stop asking
- **Hook support** - can run automatically at session end
- **Deduplication** - won't add learnings that already exist
- **Non-invasive** - reads AGENTS.md/CLAUDE.md but only writes to LEARNINGS.md

## Installation

### Quick Install

Copy the skill file to your OpenCode commands directory:

```bash
# Create commands directory if it doesn't exist
mkdir -p ~/.config/opencode/command

# Download the skill
curl -o ~/.config/opencode/command/learn.md \
  https://raw.githubusercontent.com/carlos-rodrigo/learn-skill/main/learn.md
```

### Manual Install

1. Copy `learn.md` to `~/.config/opencode/command/learn.md`
2. (Optional) Copy `LEARNINGS.template.md` to your project as `LEARNINGS.md`

## Usage

### Manual Invocation

Type `/learn` at any point during a session to extract and save learnings:

```
/learn
```

### Automatic (End-of-Session Hook)

Add to your `oh-my-opencode.json`:

```json
{
  "hooks": {
    "Stop": ["/learn"]
  }
}
```

Or create `.opencode/hooks/Stop.md` in your project:

```markdown
Run /learn to capture session feedback before closing.
```

## How It Works

### Feedback Classification

| Level | What Gets Captured | Examples |
|-------|-------------------|----------|
| **HIGH** | Process/workflow rules, repeated corrections | "Always run tests first", "Use TDD", "Never commit without verification" |
| **MEDIUM** | Style preferences, architecture patterns | "No comments in code", "Follow existing UX patterns" |
| **LOW** | One-time fixes (NOT saved) | "Fix this typo", "Use blue here" |

### Self-Learning Confirmation

1. **First runs**: Asks "Apply these learnings? (y/n/never-ask)"
2. **After "never-ask"**: Auto-applies without asking
3. **Reset**: Edit `auto_confirm: false` in LEARNINGS.md header

### Data Flow

```
Session Conversation
        │
        ▼
┌─────────────────────────────────┐
│  Read existing context:         │
│  - AGENTS.md                    │
│  - CLAUDE.md                    │
│  - LEARNINGS.md                 │
└─────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────┐
│  Analyze for:                   │
│  - Explicit corrections         │
│  - Preference statements        │
│  - Process guidance             │
│  - Repeated requests            │
└─────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────┐
│  Classify: HIGH / MEDIUM / LOW  │
└─────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────┐
│  Write to LEARNINGS.md          │
│  (with confirmation if needed)  │
└─────────────────────────────────┘
```

## LEARNINGS.md Format

The skill creates/updates a `LEARNINGS.md` file in your project root:

```markdown
# Project Learnings

<!-- 
  Auto-generated by /learn skill
  auto_confirm: false
-->

## Quick Reference

| Category | Learning |
|----------|----------|
| PROCESS | Always run tests before committing |
| CODE_STYLE | No comments in production code |

---

## Learnings

### [PROCESS] Test-First Development
- **Level**: HIGH
- **Session**: ses_abc123
- **Date**: 2024-01-15
- **Context**: User corrected agent for committing without running tests
- **Learning**: Always run tests before any commit

### [CODE_STYLE] No Inline Comments
- **Level**: MEDIUM
- **Session**: ses_def456
- **Date**: 2024-01-16
- **Context**: User asked to remove auto-generated comments
- **Learning**: Do not add comments to code unless explicitly requested
```

## Categories

Learnings are organized into categories:

- `PROCESS` - Workflow and methodology
- `CODE_STYLE` - Code formatting, comments, naming
- `ARCHITECTURE` - Design patterns, structure
- `UI_UX` - Frontend patterns, design system
- `TESTING` - Test strategy, verification
- `TOOLING` - Tool usage, commands

## Requirements

- [OpenCode](https://opencode.ai) v1.0.150+
- [oh-my-opencode](https://github.com/code-yeongyu/oh-my-opencode) (recommended for hook support)

## License

MIT
